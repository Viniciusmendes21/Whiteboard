{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport let HistoryService = /*#__PURE__*/(() => {\n  class HistoryService {\n    constructor() {\n      this.history = [];\n      this.currentIndex = -1;\n      this.maxHistorySize = 50;\n      this.canUndoSubject = new BehaviorSubject(false);\n      this.canRedoSubject = new BehaviorSubject(false);\n      this.canUndo$ = this.canUndoSubject.asObservable();\n      this.canRedo$ = this.canRedoSubject.asObservable();\n    }\n    addState(state) {\n      // Remove any states after current index\n      this.history = this.history.slice(0, this.currentIndex + 1);\n      // Add new state\n      this.history.push(this.deepClone(state));\n      this.currentIndex++;\n      // Limit history size\n      if (this.history.length > this.maxHistorySize) {\n        this.history.shift();\n        this.currentIndex--;\n      }\n      this.updateCanUndoRedo();\n    }\n    undo() {\n      if (this.currentIndex > 0) {\n        this.currentIndex--;\n        this.updateCanUndoRedo();\n        return this.deepClone(this.history[this.currentIndex]);\n      }\n      return null;\n    }\n    redo() {\n      if (this.currentIndex < this.history.length - 1) {\n        this.currentIndex++;\n        this.updateCanUndoRedo();\n        return this.deepClone(this.history[this.currentIndex]);\n      }\n      return null;\n    }\n    clear() {\n      this.history = [];\n      this.currentIndex = -1;\n      this.updateCanUndoRedo();\n    }\n    updateCanUndoRedo() {\n      this.canUndoSubject.next(this.currentIndex > 0);\n      this.canRedoSubject.next(this.currentIndex < this.history.length - 1);\n    }\n    deepClone(obj) {\n      return JSON.parse(JSON.stringify(obj));\n    }\n    static {\n      this.ɵfac = function HistoryService_Factory(t) {\n        return new (t || HistoryService)();\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: HistoryService,\n        factory: HistoryService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return HistoryService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}